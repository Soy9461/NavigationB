<!doctype html>
<html>
	<head>
		<title>jsPlumb 1.5.3 - flowchart connectors demonstration - jQuery</title>
		<link rel="stylesheet" href="topo-all.css">
		<link rel="stylesheet" href="topo.css">
		
		<!-- DEP -->
	    <script src="../jsPlumb/jquery-1.9.0-min.js"></script>
		<script src="../jsPlumb/jquery-ui-1.9.2-min.js"></script>
        
		<!-- /DEP -->
				
		<!-- JS -->
		<!-- support lib for bezier stuff -->
		<script src="../jsPlumb/jsBezier-0.6-min.js"></script> 
		<!-- jsplumb geom functions -->   
		<script src="../jsPlumb/jsplumb-geom-0.1.js"></script>
		<!-- jsplumb util -->
		<script src="../jsPlumb/util.js"></script>
        <!-- base DOM adapter -->
		<script src="../jsPlumb/dom-adapter.js"></script>        
		<!-- main jsplumb engine -->
		<script src="../jsPlumb/jsPlumb.js"></script>
        <!-- endpoint -->
		<script src="../jsPlumb/endpoint.js"></script>                
        <!-- connection -->
		<script src="../jsPlumb/connection.js"></script>
        <!-- anchors -->
		<script src="../jsPlumb/anchors.js"></script>        
		<!-- connectors, endpoint and overlays  -->
		<script src="../jsPlumb/defaults.js"></script>
		<!-- connector editors -->
		<script src="../jsPlumb/connector-editors.js"></script>
		<!-- bezier connectors -->
		<script src="../jsPlumb/connectors-bezier.js"></script>
		<!-- state machine connectors -->
		<script src="../jsPlumb/connectors-statemachine.js"></script>
        <!-- flowchart connectors -->
		<script src="../jsPlumb/connectors-flowchart.js"></script>        
		<!-- SVG renderer -->
		<script src="../jsPlumb/renderers-svg.js"></script>
		<!-- canvas renderer -->
		<script src="../jsPlumb/renderers-canvas.js"></script>
		<!-- vml renderer -->
		<script src="../jsPlumb/renderers-vml.js"></script>
        
        <!-- jquery jsPlumb adapter -->
		<script src="../jsPlumb/jquery.jsPlumb.js"></script>
		<!-- /JS -->
		
		<!--  demo code -->
		<script src="drawtopo.js"></script>
		
		<script type="text/javascript">
			jsPlumb.bind("ready", function() {
				
				// 拓扑数据结构根节点位置设置
				var rootPosition = [270, 300];
				var nodeTypeArray = ['VM', 'DEVICE', 'NC', 'VIP'];
				var topoData = {
					type: 'VM', key: '110.75.188.35', 
					rel: [
					     {
					    	 type: 'DEVICE',
					    	 key: '3-120343'
					     },
					    
					     {
					    	 type: 'DEVICE',
					    	 key: '3-120344'
					     },
					    
					     {
					    	 type: 'VIP',
					    	 key: '223.6.250.2',
					    	 rel: [
					    	     { type: 'VM', key: '110.75.189.12' },
					    	     { type: 'VM', key: '110.75.189.13' }
					    	 ]
					     },
					    
					     {
					    	 type: 'NC',
					    	 key: '10.242.192.2',
					    	 rel: [
                                 { type: 'VM', key: '110.75.188.132' },
                                 { type: 'VM', key: '110.75.188.135' }
					    	 ]
					     
					     }
					]
				};
				
				drawTopo(topoData, rootPosition, nodeTypeArray);
				
				var newTopoData = {
					type: 'NC',
			    	key: '10.242.192.2',
			    	rel: [
                           { type: 'VM', key: '110.75.188.140' }
			    	]	
				};
				
                var mergedTopoData = mergeNewTopo(topoData, newTopoData);
				$('#topoRegion').empty();
				drawTopo(mergedTopoData, rootPosition, nodeTypeArray);
			
				
			});
		
		
		</script>
		
	</head>
	<body>		
		
        <div id="topoRegion">
	    </div>
			
	</body>
</html>

